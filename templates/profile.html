{% extends 'base.html' %}
{% block content %}
    <div class="max-w-lg mx-auto bg-gray-800 p-4 sm:p-6 rounded-lg shadow-lg mt-8">
        <img src="{% if profile.profile_picture %}{{ profile.profile_picture.url }}{% else %}/static/default.jpg{% endif %}" class="w-20 h-20 sm:w-24 sm:h-24 rounded-full mx-auto mb-4 object-cover">
        <h1 class="text-xl sm:text-2xl font-bold text-white text-center">{{ profile.user.username }}</h1>
        <p class="text-gray-300 text-center mb-4 break-words">{{ profile.bio|default:"No bio yet." }}</p>
        <p class="text-gray-400 text-center mb-4">Following: {{ profile.following.count }} | Followers: {{ profile.followers.count }}</p>
        {% if profile.user != user %}
            <a href="{% url 'follow' profile.id %}" class="block text-center bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-full mb-4 transition duration-300">
                {% if profile in user.profile.following.all %}Unfollow{% else %}Follow{% endif %}
            </a>
        {% endif %}
        {% if profile.user == user %}
            <form method="post" enctype="multipart/form-data" class="space-y-4">
                {% csrf_token %}
                <textarea name="bio" class="w-full resize-y" placeholder="Your bio">{{ profile.bio }}</textarea>
                <div class="flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-4">
                    <label for="profile_picture" class="text-gray-300 font-semibold">Profile Picture:</label>
                    <input type="file" id="profile_picture" name="profile_picture" class="flex-1">
                </div>
                <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-full w-full transition duration-300">Update</button>
            </form>
        {% endif %}
    </div>
{% endblock %}